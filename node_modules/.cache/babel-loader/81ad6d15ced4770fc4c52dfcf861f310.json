{"ast":null,"code":"import _toConsumableArray from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/user/ecommerce-store-react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';import{jsx as _jsx}from\"react/jsx-runtime\";var ProductContext=/*#__PURE__*/React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(){var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubtotal:0,cartTax:0,cartTotal:0};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){_this.addTotals();});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count=product.count+1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectedProduct=tempCart.find(function(item){return item.id===id;});var index=tempCart.indexOf(selectedProduct);var product=tempCart[index];product.count=product.count-1;if(product.count===0){_this.removeItem(id);}else{product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){_this.addTotals();});}};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;_this.setState(function(){return{cart:_toConsumableArray(tempCart),products:_toConsumableArray(tempProducts)};},function(){_this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var subTotal=0;_this.state.cart.map(function(item){return subTotal+=item.total;});var tempTax=subTotal*0.13;var tax=parseFloat(tempTax.toFixed(2));var total=parseFloat(subTotal+tax).toFixed(2);_this.setState(function(){return{cartSubtotal:subTotal.toFixed(2),cartTax:tax,cartTotal:total};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart}),children:this.props.children});}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["C:/Users/user/ecommerce-store-react/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubtotal","cartTax","cartTotal","setProducts","tempProducts","forEach","item","singleItem","setState","getItem","id","product","find","handleDetail","addToCart","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","selectedProduct","decrement","removeItem","filter","removedProduct","clearCart","subTotal","map","tempTax","tax","parseFloat","toFixed","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { storeProducts, detailProduct } from './data';\r\n\r\nconst ProductContext = React.createContext();\r\n\r\nclass ProductProvider extends Component {\r\n    state = {\r\n        products: [],\r\n        detailProduct: detailProduct,\r\n        cart:[],\r\n        modalOpen:false,\r\n        modalProduct:detailProduct,\r\n        cartSubtotal: 0,\r\n        cartTax: 0,\r\n        cartTotal: 0,\r\n    };\r\n    componentDidMount() {\r\n        this.setProducts();\r\n    }\r\n    setProducts = () => {\r\n        let tempProducts = [];\r\n        storeProducts.forEach(item => {\r\n            const singleItem = {...item};\r\n            tempProducts =[...tempProducts, singleItem];\r\n        });\r\n    this.setState(() => {\r\n        return { products: tempProducts};\r\n    });\r\n\r\n    };\r\n\r\n    getItem = (id) => {\r\n        const product = this.state.products.find(item => item.id===id);\r\n        return product;\r\n    }\r\n    handleDetail = (id) => {\r\n        const product = this.getItem(id);\r\n        this.setState(()=> {\r\n            return {detailProduct:product}\r\n        })\r\n    };\r\n    addToCart = (id) => {\r\n       let tempProducts = [...this.state.products];\r\n       const index = tempProducts.indexOf(this.getItem(id));\r\n       const product = tempProducts[index];\r\n       product.inCart = true;\r\n       product.count =1;\r\n       const price = product.price;\r\n       product.total = price;\r\n\r\n        this.setState(()=>{\r\n            return {products: tempProducts,cart:[...this.state.cart, product]};\r\n        },\r\n        () => {\r\n            this.addTotals();\r\n        });\r\n    };\r\n    openModal = id => {\r\n        const product = this.getItem(id);\r\n        this.setState(()=>{\r\n            return {modalProduct:product, modalOpen:true}\r\n        })\r\n    }\r\n    closeModal = () => {\r\n        this.setState(()=> {\r\n            return {modalOpen:false}\r\n        })\r\n    }\r\n    increment = (id) => {\r\n         let tempCart = [...this.state.cart];\r\n         const selectedProduct = tempCart.find(item=>item.id ===id)\r\n\r\n         const index = tempCart.indexOf(selectedProduct);\r\n         const product = tempCart[index];\r\n\r\n         product.count = product.count + 1;\r\n         product.total = product.count * product.price;\r\n\r\n         this.setState(() => {return{cart:[...tempCart]}}, ()=>{this.addTotals()})\r\n    }\r\n    decrement = (id) => {\r\n        let tempCart = [...this.state.cart];\r\n        const selectedProduct = tempCart.find(item=>item.id ===id)\r\n\r\n        const index = tempCart.indexOf(selectedProduct);\r\n        const product = tempCart[index];\r\n\r\n        product.count = product.count - 1;\r\n        if(product.count === 0){\r\n            this.removeItem(id)\r\n        }\r\n        else{\r\n            product.total = product.count * product.price;\r\n            this.setState(() => {\r\n                return {cart: [...tempCart]};\r\n            }, () => {\r\n                this.addTotals();\r\n            })\r\n        }        \r\n    }\r\n    removeItem = (id) => {\r\n         let tempProducts = [...this.state.products];\r\n         let tempCart = [...this.state.cart];\r\n         tempCart = tempCart.filter(item =>item.id !==id);\r\n         const index = tempProducts.indexOf(this.getItem(id));\r\n         let removedProduct = tempProducts[index];\r\n         removedProduct.inCart = false;\r\n         removedProduct.count = 0;\r\n         removedProduct.total = 0;\r\n\r\n         this.setState(()=>{\r\n             return {\r\n                 cart:[...tempCart],\r\n                 products:[...tempProducts],                 \r\n             };\r\n         },() => {\r\n             this.addTotals();\r\n         });\r\n    };\r\n    clearCart = () => {\r\n        this.setState(() =>{\r\n            return { cart: [] };\r\n        }, ()=>{\r\n            this.setProducts();\r\n            this.addTotals();\r\n           });       \r\n    };\r\n    addTotals = () => {\r\n        let subTotal = 0;\r\n        this.state.cart.map(item=> (subTotal += item.total));\r\n        const tempTax = subTotal * 0.13;\r\n        const tax = parseFloat(tempTax.toFixed(2));\r\n        const total = parseFloat(subTotal + tax).toFixed(2);\r\n        this.setState(() =>{\r\n            return{\r\n                cartSubtotal:subTotal.toFixed(2),\r\n                cartTax: tax,\r\n                cartTotal:total,\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        return(\r\n        <ProductContext.Provider value={{\r\n            ...this.state, \r\n            handleDetail: this.handleDetail,\r\n            addToCart: this.addToCart, \r\n            openModal:this.openModal, \r\n            closeModal:this.closeModal,\r\n            increment: this.increment,\r\n            decrement: this.decrement,\r\n            removeItem: this.removeItem,\r\n            clearCart: this.clearCart}}>\r\n            {this.props.children}\r\n        </ProductContext.Provider>\r\n        )\r\n    }\r\n}\r\nconst ProductConsumer = ProductContext.Consumer;\r\n\r\nexport {ProductProvider, ProductConsumer};"]},"metadata":{},"sourceType":"module"}